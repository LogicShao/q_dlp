# Q_DLP 主题系统说明

## 主题功能概述

Q_DLP 视频下载器现在支持两种精美的主题：**浅色主题(Light)** 和 **深色主题(Dark)**，用户可以根据个人喜好和使用环境选择合适的界面风格。

## 支持的主题

### 1. 浅色主题 (Light Theme)
- **背景色调**: 白色和浅灰色系
- **文字颜色**: 深色文字，易于阅读
- **适用场景**: 明亮环境，白天使用
- **配色方案**: 
  - 主背景: `#ffffff` (白色)
  - 控件背景: `#f0f0f0` (浅灰)
  - 边框颜色: `#d0d0d0` (中性灰)
  - 文字颜色: `#333333` (深灰)
  - 强调色: `#0078d4` (Microsoft蓝)

### 2. 深色主题 (Dark Theme)
- **背景色调**: 深灰色和黑色系
- **文字颜色**: 浅色文字，护眼舒适
- **适用场景**: 暗光环境，夜晚使用
- **配色方案**:
  - 主背景: `#2b2b2b` (深灰)
  - 控件背景: `#404040` (中深灰)
  - 边框颜色: `#5a5a5a` (灰色)
  - 文字颜色: `#e0e0e0` (浅灰)
  - 强调色: `#0078d4` (Microsoft蓝)

## 如何切换主题

### 方法1：通过设置对话框（推荐）
1. 启动Q_DLP程序
2. 点击工具栏右侧的 **"设置"** 按钮
3. 在设置对话框中选择 **"界面设置"** 选项卡
4. 在 **"主题"** 下拉框中选择：
   - `light` - 浅色主题
   - `dark` - 深色主题
5. **实时预览**：选择后会立即应用到界面
6. 点击 **"确定"** 保存设置

### 方法2：修改配置文件
直接编辑 `src/config.json` 文件：
```json
{
    "ui": {
        "theme": "dark"  // 改为 "light" 或 "dark"
    }
}
```

## 主题文件结构

```
config/
├── light_theme.qss    # 浅色主题样式文件
├── dark_theme.qss     # 深色主题样式文件  
└── style.qss         # 旧版样式文件（已弃用）
```

## 样式文件详情

### 涵盖的界面元素
- **主窗口**: 背景色、文字颜色
- **工具栏**: 背景、边框、按钮样式
- **列表控件**: 项目样式、选中效果、悬停效果
- **输入框**: 边框、焦点效果、悬停效果
- **按钮**: 正常、悬停、按下、禁用状态
- **下拉框**: 背景、箭头、下拉列表
- **进度条**: 背景、填充色、文字
- **滚动条**: 滑块、轨道、悬停效果
- **对话框**: 所有设置对话框元素
- **选项卡**: 标签页样式
- **复选框**: 选中/未选中状态
- **分组框**: 边框、标题样式

## 技术实现

### 1. 样式加载机制
```python
def load_stylesheet(self):
    """根据配置加载主题样式表"""
    theme = self.config.get("ui", {}).get("theme", "light")
    
    if theme == "dark":
        style_path = "config/dark_theme.qss"
    else:
        style_path = "config/light_theme.qss"
    
    # 加载并应用样式
    with open(style_path, 'r', encoding='utf-8') as f:
        self.setStyleSheet(f.read())
```

### 2. 实时预览功能
- 设置对话框中的主题选择会触发 `preview_theme()` 方法
- 立即加载并应用新主题样式
- 无需重启程序即可看到效果

### 3. 配置持久化
- 主题设置保存在 `config.json` 文件中
- 程序启动时自动加载上次选择的主题
- 设置更改后立即保存并生效

## 自定义主题

### 创建新主题
1. 复制现有的 `.qss` 文件
2. 修改颜色值和样式属性
3. 保存为新的主题文件
4. 在代码中添加新主题选项

### 样式语法
使用Qt样式表（QSS）语法，类似CSS：
```css
/* 按钮样式示例 */
QPushButton {
    background-color: #f0f0f0;
    border: 1px solid #c0c0c0;
    border-radius: 4px;
    padding: 6px 12px;
    color: #333333;
}

QPushButton:hover {
    background-color: #e5e5e5;
}
```

## 主题特性

### 🎨 精美设计
- 现代化扁平设计风格
- 统一的颜色规范和视觉语言
- 优秀的对比度和可读性

### 🌓 智能适配
- 根据使用环境选择合适主题
- 护眼的深色模式
- 清新的浅色模式

### ⚡ 实时切换
- 无需重启程序
- 设置对话框实时预览
- 即改即生效

### 💾 配置保存
- 自动记住用户选择
- 下次启动时恢复设置
- 支持配置文件备份

## 故障排除

### 主题不生效
1. 检查 `config/` 目录下是否存在主题文件
2. 查看 `config.json` 中的主题设置是否正确
3. 确认文件编码为UTF-8
4. 重启程序或使用"设置"重新选择主题

### 样式显示异常
1. 检查QSS文件语法是否正确
2. 确认颜色值格式正确（如 `#ffffff`）
3. 查看程序日志中的错误信息
4. 尝试重置为默认设置

现在您的Q_DLP视频下载器拥有了美观的双主题系统！用户可以根据个人喜好和使用场景自由切换，享受更佳的视觉体验。